{"version":3,"file":"BattleServer.js","sourceRoot":"","sources":["../../../../../src/game/sys/server/BattleServer.ts"],"names":[],"mappings":"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"}