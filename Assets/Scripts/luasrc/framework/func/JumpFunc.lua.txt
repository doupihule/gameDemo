require("framework/func/BaseFunc")
require("game/sys/consts/ChannelConst")
require("framework/common/UserInfo")

JumpFunc = class('JumpFunc',BaseFunc)
function JumpFunc:getCfgsPathArr()
  return {{name="Jump_json"}}
end

function JumpFunc.__getters.instance()
  if not JumpFunc._instance then
    JumpFunc._instance = JumpFunc()
  end
  return JumpFunc._instance
end

function JumpFunc:getJumpList()
  if self._jumpList then
    return self._jumpList
  end
  self._jumpList = {}
  local listTmp = self:getAllCfgData("Jump_json", true)
  for key in pairs(listTmp) do
    -- [ts2lua]listTmp下标访问可能不正确
    if listTmp[key].GameAppId ~= ChannelConst.getChannelConst(UserInfo.platformId).appId then
      -- [ts2lua]listTmp下标访问可能不正确
      table.insert(self._jumpList, listTmp[key])
    end
  end
  self._jumpList = self._jumpList:sort(function(a, b)
    if Number(a.Position) > Number(b.Position) then
      return 1
    else
      return -1
    end
  end
  )
  return self._jumpList
end
