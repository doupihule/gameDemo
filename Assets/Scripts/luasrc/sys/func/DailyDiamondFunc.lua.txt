

DailyDiamondFunc = class('DailyDiamondFunc',BaseFunc)

function DailyDiamondFunc.__getters.instance()
  if not DailyDiamondFunc._instance then
    DailyDiamondFunc._instance = DailyDiamondFunc.new()
  end
  return DailyDiamondFunc._instance
end

function DailyDiamondFunc:getCfgsPathArr()
  return {{name="DailyDiamond_json"}}
end

function DailyDiamondFunc:getDataById(id)
  return self:getCfgDatas("DailyDiamond_json", id)
end

function DailyDiamondFunc:getMaxId()
  local allData = self:getAllCfgData("DailyDiamond_json")
  local dataKeys = Object:keys(allData)
  local maxId = "0"
  local i = 0
  repeat
    if tonumber(dataKeys[i+1]) >= tonumber(maxId) then
      maxId = dataKeys[i+1]
    end
    i=i+1
  until not(i < #dataKeys)
  return tonumber(maxId)
end

function DailyDiamondFunc:getNextShowTime(currentStep)
  currentStep = tonumber(currentStep)
  local i = 0
  repeat
    if self:getDataById(currentStep).showDiamond == 1 then
      break
    else
      currentStep = currentStep + 1
    end
    i=i+1
  until not(i <= self:getMaxId() - currentStep)
  return currentStep
end
